<HTML>
<HEAD>
</HEAD>
<BODY>
<HR>
<A NAME="ensure-generic-function-using-class"><I>Generic Function</I> <B>ENSURE-GENERIC-FUNCTION-USING-CLASS</B>

<P><B>Syntax:</B></P>

<P><B>ensure-generic-function-using-class</B>
  <I>generic-function-or-nil</I> <I>function-name</I>
  <TT>&amp;key</TT>
  <TT>:argument-precedence-order</TT>
  <TT>:declarations</TT>
  <TT>:documentation</TT>
  <TT>:generic-function-class</TT>
  <TT>:lambda-list</TT>
  <TT>:method-class</TT>
  <TT>:method-combination</TT>
  <TT>:name</TT>
  <TT>&amp;allow-other-keys</TT>
  =&gt; <I>generic-function</I></P>
  
<P><B>Arguments and values:</B></P>

<P><I>generic-function-or-nil</I></P> -- A generic function
metaobject <TT>nil</TT>.</P> 

<P><I>function-name</I> -- A symbol or a list of the form 
<TT>(setf <I>symbol</I>)</TT>.</P>

<P><TT>:generic-function-class</TT> -- A class metaobject or a class
name.  If it is not supplied, it defaults to the class named 
<a href="class-standard-generic-function.html">
standard-generic-function</a>.  If a class name is supplied, it is interpreted as
the class with that name.  If a class name is supplied, but there is no such
class, an error is signaled.</P>

<P>
For the interpretation of additional keyword arguments, see 
<a href="initialization-of-generic-function-metaobjects.html">``Initialization
of Generic Function Metaobjects''</a>.</P>

<P><I>generic-function</I> -- A generic function metaobject.</P>

<P><B>Description:</B></P>

<P>
The generic function <a href="ensure-generic-function-using-class.html">ensure-generic-function-using-class</a> is called to
define or modify the definition of a globally named generic function.  It is
called by the <a href="ensure-generic-function.html">ensure-generic-function</a> function.  It can also be called
directly.
</P>

<P>
The first step performed by this generic function is to compute the set of
initialization arguments which will be used to create or reinitialize the
globally named generic function.  These initialization arguments are computed
from the full set of keyword arguments received by this generic function as
follows:
</P>

<UL>
<LI><P>The <TT>:generic-function-class</TT> argument is not included in the
initialization arguments.</P></LI>

<LI><P>If the <TT>:method-class</TT> argument was received by this generic
function, it is converted into a class metaobject.  This is done by looking up
the class name with
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_find_c.htm#find-class">
find-class</a>.  If there is no such class, an error is signalled.</P></LI>

<LI><P>All other keyword arguments are included directly in the initialization
arguments.</P></LI>

</UL>

<P>
If the <I>generic-function-or-nil</I> argument is <TT>nil</TT>, an instance of the class
specified by the <TT>:generic-function-class</TT> argument is created by calling
<a href="make-instance.html">make-instance</a>
with the previously computed initialization arguments.
The function name <I>function-name</I> is set to name the generic function.
The newly created generic function metaobject is returned.
</P>

<P>
If the class of the <I>generic-function-or-nil</I> argument is not the same as the
class specified by the <TT>:generic-function-class</TT> argument, an error is
signaled.
</P>

<P>
Otherwise the generic function <I>generic-function-or-nil</I> is redefined by calling
the 
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_reinit.htm#reinitialize-instance">
reinitialize-instance</a> generic function
with <I>generic-function-or-nil</I> and the initialization arguments.
The <I>generic-function-or-nil</I> argument is then returned.
</P>

<P><B>Methods:</B></P>

<table>
  <tr>
    <td><A HREF="ensure-generic-function-using-class-generic-function.html">
	<B>ensure-generic-function-using-class</B>
	(<I>generic-function</I> generic-function)
	<I>function-name</I>
	<TT>&amp;key</TT>
	<TT>:generic-function-class</TT>
	<TT>&amp;allow-other-keys</TT></A>
    </td>
  </tr>
  <tr>
    <td><A HREF="ensure-generic-function-using-class-null.html">
	<B>ensure-generic-function-using-class</B>
	(<I>generic-function</I> null)
	<I>function-name</I>
	<TT>&amp;key</TT>
	<TT>:generic-function-class</TT>
	<TT>&amp;allow-other-keys</TT></A>
    </td>
  </tr>
</table>


</BODY>
</HTML>
